<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora Cutter-Sanborn</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f5f5f5;
      padding: 40px 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 40px;
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 40px;
      font-size: 2rem;
      font-weight: 600;
    }

    .form-group {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      align-items: end;
    }

    .input-group {
      flex: 1;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #555;
      font-size: 14px;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.2s ease;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    input[type="text"]:disabled {
      background-color: #f8f9fa;
      color: #6c757d;
    }

    .button-group {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-clear {
      background-color: #6c757d;
      color: white;
    }

    .btn-clear:hover {
      background-color: #5a6268;
      transform: translateY(-1px);
    }

    .btn-copy {
      background-color: #28a745;
      color: white;
    }

    .btn-copy:hover {
      background-color: #218838;
      transform: translateY(-1px);
    }

    .btn-copy:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
      transform: none;
    }

    .result-info {
      margin-top: 30px;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #007bff;
    }

    .result-info h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .result-info p {
      color: #666;
      line-height: 1.5;
      margin-bottom: 8px;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #28a745;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 1000;
    }

    .toast.show {
      transform: translateX(0);
    }

    @media (max-width: 600px) {
      .form-group {
        flex-direction: column;
        gap: 15px;
      }

      .button-group {
        flex-direction: column;
        align-items: center;
      }

      button {
        width: 200px;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Calculadora Cutter-Sanborn</h1>

    <div class="form-group">
      <div class="input-group">
        <label for="sobrenome">Sobrenome</label>
        <input type="text" id="sobrenome" placeholder="Digite o sobrenome">
      </div>

      <div class="input-group">
        <label for="nome">Nome</label>
        <input type="text" id="nome" placeholder="Digite o nome">
      </div>

      <div class="input-group">
        <label for="numero">NÃºmero</label>
        <input type="text" id="numero" placeholder="Resultado aparecerÃ¡ aqui" disabled>
      </div>
    </div>

    <div class="button-group">
      <button class="btn-clear" onclick="limparCampos()">
        ðŸ§¹ Limpar campos
      </button>
      <button class="btn-copy" id="copyBtn" onclick="copiarResultado()" disabled>
        ðŸ“‹ Copiar resultado
      </button>
    </div>

    <div class="result-info">
      <h3>Como usar:</h3>
      <p><strong>Sobrenome:</strong> Digite o sobrenome do autor (ex: "Lentino", "Prado")</p>
      <p><strong>Nome:</strong> Digite o nome do autor (ex: "Noemia", "Heloisa")</p>
      <p><strong>NÃºmero:</strong> O nÃºmero Cutter-Sanborn serÃ¡ calculado automaticamente</p>
      <p>O resultado Ã© atualizado em tempo real conforme vocÃª digita.</p>
    </div>
  </div>

  <div class="toast" id="toast">
    Resultado copiado para a Ã¡rea de transferÃªncia!
  </div>

  <!-- Load the CDN bundle from unpkg -->
  <script src="https://unpkg.com/cutter-sanborn-js/dist/cutter-sanborn.min.js"></script>

  <script>
    // Initialize the Cutter-Sanborn table
    const cutterSanbornTable = CutterSanborn.CutterSanbornTableFactory.createTable();

    // Get DOM elements
    const sobrenomeInput = document.getElementById('sobrenome');
    const nomeInput = document.getElementById('nome');
    const numeroInput = document.getElementById('numero');
    const copyBtn = document.getElementById('copyBtn');
    const toast = document.getElementById('toast');

    // Calculate and update result
    function calcularNumero() {
      const sobrenome = sobrenomeInput.value.trim();
      const nome = nomeInput.value.trim();

      if (sobrenome && nome) {
        try {
          const resultado = cutterSanbornTable.callNumber(sobrenome, nome);
          numeroInput.value = resultado;
          copyBtn.disabled = false;
        } catch (error) {
          numeroInput.value = 'Erro no cÃ¡lculo';
          copyBtn.disabled = true;
        }
      } else {
        numeroInput.value = '';
        copyBtn.disabled = true;
      }
    }

    // Clear all fields
    function limparCampos() {
      sobrenomeInput.value = '';
      nomeInput.value = '';
      numeroInput.value = '';
      copyBtn.disabled = true;
      sobrenomeInput.focus();
    }

    // Copy result to clipboard
    async function copiarResultado() {
      const resultado = numeroInput.value;
      if (resultado && resultado !== 'Erro no cÃ¡lculo') {
        try {
          await navigator.clipboard.writeText(resultado);
          mostrarToast();
        } catch (error) {
          // Fallback for older browsers
          const textArea = document.createElement('textarea');
          textArea.value = resultado;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
          mostrarToast();
        }
      }
    }

    // Show toast notification
    function mostrarToast() {
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Add event listeners for real-time calculation
    sobrenomeInput.addEventListener('input', calcularNumero);
    nomeInput.addEventListener('input', calcularNumero);

    // Focus on first input when page loads
    window.addEventListener('load', () => {
      sobrenomeInput.focus();
    });

    // Add keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + L to clear fields
      if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
        e.preventDefault();
        limparCampos();
      }

      // Ctrl/Cmd + C when focused on result to copy
      if ((e.ctrlKey || e.metaKey) && e.key === 'c' && document.activeElement === numeroInput) {
        e.preventDefault();
        copiarResultado();
      }
    });
  </script>
</body>

</html>